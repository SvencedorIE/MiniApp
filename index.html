Skip to content
Search or jump to…
Pull requests
Issues
Codespaces
Marketplace
Explore
 
@SvencedorIE 
SvencedorIE
/
MiniApp
Public
Cannot fork because you own this repository and are not a member of any organizations.
Code
Issues
Pull requests
Actions
Projects
Security
Insights
Settings
MiniApp/index.html
@SvencedorIE
SvencedorIE Update index.html
Latest commit 4e22b45 2 hours ago
 History
 1 contributor
57 lines (51 sloc)  1.56 KB

<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Пример страницы с JavaScript</title>
	<style>
      #frame {
        display: block;
        margin: 0 auto;
        width: 100%;
        height: 99vh;
        border: none;
      }
  
    </style>
    
    
	<script>
		function getParameterByName(paramName) {
              var urlParams = new URLSearchParams(window.location.search);
              return urlParams.get(paramName);
            }

		function showParams() {
			var vkUserId = getParameterByName('vk_user_id');
			var frame = document.getElementById('frame');
			if (vkUserId) {
				var src = frame.src + '?vk_user_id='+ vkUserId + '&vk_url=vk.com/id' + vkUserId;
				frame.setAttribute('src', src);
			}
		}
	</script>
</head>
<body onload="showParams()">
    <script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
    <script>
  // Отправляет событие инициализации нативному клиенту
      vkBridge.send('VKWebAppInit');
	vkBridge.send('VKWebAppAllowMessagesFromGroup', {
	  group_id: 1008899
	  })
	  .then((data) => { 
	    if (data.result) {
	      // Пользователь разрешил отправку сообщений от имени сообщества
	    }
	  })
	  .catch((error) => {
	    // Ошибка
	    console.log(error);
	  });
	    
    </script>
	<script src="https://yastatic.net/s3/frontend/forms/_/embed.js"></script>
    <iframe id="frame" src="https://forms.yandex.ru/cloud/6423e82b5056900b21bbd498/" frameborder="0" name="ya-form-6423e82b5056900b21bbd498"></iframe>

</body>
</html>
